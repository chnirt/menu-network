{"version":3,"file":"static/js/513.e9c424c7.chunk.js","mappings":"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","sources":["../node_modules/.pnpm/nanoid@4.0.2/node_modules/nanoid/index.browser.js","mocks/index.tsx","screens/NewDish/index.tsx","firebase/storage.ts"],"sourcesContent":["export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","import { nanoid } from \"nanoid\";\nimport { IS_DEVELOP } from \"../constants\";\n\nexport const MASTER_MOCK_DATA = {\n  LOGIN: {\n    email: IS_DEVELOP ? \"chnirt@gmail.com\" : \"\",\n    password: IS_DEVELOP ? \"Admin@123\" : \"\",\n  },\n  REGISTER: {\n    fullName: IS_DEVELOP ? \"Chnirt Chnirt\" : \"\",\n    email: IS_DEVELOP ? \"chnirt@gmail.com\" : \"\",\n    username: IS_DEVELOP ? \"chnirt\" : \"\",\n    password: IS_DEVELOP ? \"Admin@123\" : \"\",\n    confirmPassword: IS_DEVELOP ? \"Admin@123\" : \"\",\n  },\n  NEW_CATEGORY: {\n    categoryName: IS_DEVELOP ? \"Cocktail\" : \"\",\n  },\n  NEW_DISH: {\n    dishName: IS_DEVELOP ? \"Phatty’S Nachos\" : \"\",\n    price: IS_DEVELOP ? 99000 : 0,\n    dishFiles: []\n  },\n};\n\nexport const SAMPLE_DATA = {\n  reply: {\n    menu_infos: [\n      {\n        dish_type_id: nanoid(),\n        dish_type_name: \"Coffee\",\n        dishes: [\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/milk-coffee.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Milk Coffee\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/black-coffee.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Black Coffee\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/latte.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Latte\",\n          },\n        ],\n      },\n      {\n        dish_type_id: nanoid(),\n        dish_type_name: \"Tea\",\n        dishes: [\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value:\n                  \"https://wjhjnr.csb.app/peach-orange-lemongrass-tea.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Trà đào cam sả\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/lychee-oolong-tea.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Trà vải\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/passion-fruit-tea.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Trà chanh dây\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/kumquat-tea.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Trà tắc\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/sugar-tea.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Trà đường\",\n          },\n        ],\n      },\n      {\n        dish_type_id: nanoid(),\n        dish_type_name: \"Fruit\",\n        dishes: [\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/orange-juice.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Cam\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/guava-juice.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Ổi\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/milk-coffee.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Cà Cải\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/water-melon.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Dưa hấu\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/wax-gourd.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Bí đao\",\n          },\n        ],\n      },\n      {\n        dish_type_id: nanoid(),\n        dish_type_name: \"Yogurt\",\n        dishes: [\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/sour-milk.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Sour Milk\",\n          },\n        ],\n      },\n      {\n        dish_type_id: nanoid(),\n        dish_type_name: \"Soft Drink\",\n        dishes: [\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/coke.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Coke\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/diet-coke.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Diet Coke\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/sprite.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Sprite\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/fanta.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Fanta\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/red-bull.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Red Bull\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/dr-thanh.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Dr Thanh\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/0-degree.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"0 degree\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/c2.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"C2\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/revive.jpeg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Revive\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/tea+-plus.png\",\n              },\n            ],\n            id: nanoid(),\n            name: \"TEA+ Plus\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/247.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"247\",\n          },\n          {\n            price: {\n              text: \"99,000đ\",\n            },\n            photos: [\n              {\n                value: \"https://wjhjnr.csb.app/number-one.jpg\",\n              },\n            ],\n            id: nanoid(),\n            name: \"Number One\",\n          },\n        ],\n      },\n    ],\n  },\n};\n","import {\n  Button,\n  Form,\n  ImageUploadItem,\n  ImageUploader,\n  Input,\n  NavBar,\n  Stepper,\n  Toast,\n} from \"antd-mobile\";\nimport { Fragment, useCallback, useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { DocumentData, DocumentReference } from \"firebase/firestore\";\nimport {\n  addDocument,\n  getColRef,\n  getDocRef,\n  getDocument,\n  updateDocument,\n} from \"../../firebase/service\";\nimport useAuth from \"../../hooks/useAuth\";\nimport { MASTER_MOCK_DATA } from \"../../mocks\";\nimport { uploadStorageBytesResumable } from \"../../firebase/storage\";\nimport { Loading } from \"../../global\";\n\nconst initialValues = MASTER_MOCK_DATA.NEW_DISH;\n\nconst NewDish = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const { categoryId, dishId } = useParams();\n  const isEditMode = Boolean(dishId);\n  const [form] = Form.useForm();\n  const [dishDocRefState, setDishDocRefState] = useState<DocumentReference<\n    DocumentData,\n    DocumentData\n  > | null>(null);\n  const onFinish = useCallback(\n    async (values: typeof initialValues) => {\n      if (user === null || categoryId === undefined) return;\n      try {\n        Loading.get().show();\n        const { dishName, price, dishFiles } = values;\n        const uid = user.uid;\n        const dishData = {\n          dishFiles: dishFiles.map((dishFile: any) => dishFile.url),\n          dishName,\n          price,\n        };\n\n        if (isEditMode) {\n          if (dishDocRefState === null) return;\n          await updateDocument(dishDocRefState, dishData);\n        } else {\n          const dishColRef = getColRef(\n            \"users\",\n            uid,\n            \"categories\",\n            categoryId,\n            \"dishes\"\n          );\n          await addDocument(dishColRef, dishData);\n        }\n        navigate(-1);\n        Toast.show({\n          icon: \"success\",\n          content: isEditMode ? \"Dish is updated\" : \"Dish is created\",\n        });\n\n        return;\n      } catch (error: any) {\n        Toast.show({\n          icon: \"error\",\n          content: error.message,\n        });\n      } finally {\n        Loading.get().hide();\n      }\n    },\n    [user, isEditMode, dishDocRefState]\n  );\n\n  const fetchDishById = useCallback(\n    async (dishId: string) => {\n      if (user === null || categoryId === undefined) return;\n      const dishDocRef = getDocRef(\n        \"users\",\n        user?.uid,\n        \"categories\",\n        categoryId,\n        \"dishes\",\n        dishId\n      );\n      setDishDocRefState(dishDocRef);\n      const dishDocData: any = await getDocument(dishDocRef);\n      form.setFieldsValue({\n        ...dishDocData,\n        dishFiles: dishDocData.dishFiles.map((dishFile: string) => ({\n          url: dishFile,\n        })),\n      });\n    },\n    [user, categoryId, form]\n  );\n\n  useEffect(() => {\n    if (categoryId === undefined || dishId === undefined) return;\n    fetchDishById(dishId);\n  }, [categoryId, dishId, fetchDishById]);\n\n  return (\n    <Fragment>\n      <NavBar\n        className=\"sticky top-0 z-[100] bg-white\"\n        onBack={() => navigate(-1)}\n      >\n        {isEditMode ? \"EDIT DISH\" : \"NEW DISH\"}\n      </NavBar>\n      <Form\n        form={form}\n        initialValues={initialValues}\n        layout=\"horizontal\"\n        onFinish={onFinish}\n        // footer={\n        //   <Button block type=\"submit\" color=\"primary\" size=\"large\">\n        //     {isEditMode ? \"EDIT\" : \"CREATE\"}\n        //   </Button>\n        // }\n      >\n        <Form.Header>{isEditMode ? \"Edit Dish\" : \"New Dish\"}</Form.Header>\n        <Form.Item\n          name=\"dishFiles\"\n          label=\"Dish Files\"\n          rules={[{ required: true, message: \"Dish Files is required\" }]}\n        >\n          <ImageUploader\n            upload={function (file: File): Promise<ImageUploadItem> {\n              const isJpgOrPng =\n                file.type === \"image/jpeg\" || file.type === \"image/png\";\n              if (!isJpgOrPng) {\n                return Promise.reject(\n                  new Error(\"You can only upload JPG/PNG file!\")\n                );\n              }\n              const isLt2M = file.size / 1024 / 1024 < 2;\n              if (!isLt2M) {\n                return Promise.reject(\n                  new Error(\"Image must smaller than 2MB!\")\n                );\n              }\n\n              return new Promise((resolve, reject) => {\n                uploadStorageBytesResumable(\n                  file,\n                  undefined,\n                  (error) => reject(error),\n                  async ({ downloadURL }) =>\n                    resolve({\n                      url: downloadURL,\n                    })\n                );\n              });\n            }}\n            multiple\n            maxCount={3}\n          />\n        </Form.Item>\n        <Form.Item\n          name=\"dishName\"\n          label=\"Dish Name\"\n          rules={[{ required: true, message: \"Dish Name is required\" }]}\n        >\n          <Input placeholder=\"Phatty’S Nachos\" />\n        </Form.Item>\n        <Form.Item\n          name=\"price\"\n          label=\"Price\"\n          rules={[\n            { required: true, message: \"Price is required\" },\n            {\n              type: \"number\",\n              min: 1,\n              message: \"Invalid Price\",\n            },\n          ]}\n        >\n          <Stepper\n            style={{\n              width: \"100%\",\n              \"--border\": \"1px solid #f5f5f5\",\n              \"--border-inner\": \"none\",\n              \"--height\": \"36px\",\n              \"--input-width\": \"70px\",\n              \"--input-background-color\": \"var(--adm-color-background)\",\n              \"--active-border\": \"1px solid #1677ff\",\n            }}\n            min={0}\n            step={1000}\n            // formatter={(value) => `VND ${value}`}\n            // parser={(text) => parseFloat(text.replace(\"VND\", \"\"))}\n          />\n        </Form.Item>\n        <Form.Item shouldUpdate className=\"submit\">\n          {() => (\n            <Button\n              block\n              type=\"submit\"\n              color=\"primary\"\n              size=\"large\"\n              disabled={\n                !form.isFieldsTouched(true) ||\n                form.getFieldsError().filter(({ errors }) => errors.length)\n                  .length > 0\n              }\n            >\n              {isEditMode ? \"EDIT\" : \"CREATE\"}\n            </Button>\n          )}\n        </Form.Item>\n      </Form>\n    </Fragment>\n  );\n};\n\nexport default NewDish;\n\n// import {\n//   Button,\n//   Dialog,\n//   Empty,\n//   Image,\n//   List,\n//   NavBar,\n//   SearchBar,\n//   Space,\n//   SwipeAction\n// } from \"antd-mobile\";\n// import { Action, SwipeActionRef } from \"antd-mobile/es/components/swipe-action\";\n// import { useNavigate } from \"react-router-dom\";\n// import { EditSOutline, DeleteOutline } from \"antd-mobile-icons\";\n// import { useRef, useState } from \"react\";\n// import { SAMPLE_DATA } from \"../../mocks\";\n// import ListHeader from \"../../components/ListHeader\";\n// import { useDebounce } from \"react-use\";\n// import { routes } from \"../../routes\";\n\n// const NewDish = () => {\n//   const navigate = useNavigate();\n//   const swipeActionRef = useRef<SwipeActionRef>(null);\n//   const [searchText, setSearchText] = useState(\"\");\n//   const [debouncedSearchText, setDebouncedSearchText] = useState(\"\");\n//   useDebounce(\n//     () => {\n//       setDebouncedSearchText(searchText);\n//     },\n//     1000,\n//     [searchText]\n//   );\n//   const data = SAMPLE_DATA.reply.menu_infos.map((menu_info) => ({\n//     ...menu_info,\n//     title: menu_info.dish_type_name,\n//     data: menu_info.dishes.map((dish) => ({\n//       ...dish,\n//       price: dish.price.text,\n//       photo: dish.photos[0].value,\n//       categoryName: menu_info.dish_type_name\n//     }))\n//   }));\n//   const rightActions: Action[] = [\n//     {\n//       key: \"edit\",\n//       text: <EditSOutline />,\n//       color: \"warning\",\n//       onClick: async () => {\n//         await Dialog.confirm({\n//           content: \"Edit?\"\n//         });\n//         swipeActionRef.current?.close();\n//       }\n//     },\n//     {\n//       key: \"delete\",\n//       text: <DeleteOutline />,\n//       color: \"danger\",\n//       onClick: async () => {\n//         await Dialog.confirm({\n//           content: \"Delete?\"\n//         });\n//         swipeActionRef.current?.close();\n//       }\n//     }\n//   ];\n\n//   return (\n//     <div>\n//       <NavBar\n//         className=\"sticky top-0 z-[100] bg-white\"\n//         onBack={() => navigate(-1)}\n//       >\n//         NEW DISH\n//       </NavBar>\n//       <div className=\"sticky top-[45px] z-[100] bg-white\">\n//         <SearchBar\n//           placeholder=\"Search\"\n//           showCancelButton\n//           cancelText=\"Cancel\"\n//           value={searchText}\n//           onChange={setSearchText}\n//         />\n//       </div>\n//       <Space className=\"w-full\" justify=\"end\">\n//         <Button onClick={() => navigate(routes.newCategory)}>\n//           Add New Category\n//         </Button>\n//       </Space>\n\n//       {data.length > 0 ? (\n//         data.map((item, ii) => (\n//           <div key={`category-${ii}`}>\n//             {item.data.length > 0 && (\n//               <List header={<ListHeader {...{ title: item.title }} />}>\n//                 {item.data.map((dataItem: any, dii: number) => (\n//                   <SwipeAction\n//                     ref={swipeActionRef}\n//                     key={`data-item-${dii}`}\n//                     rightActions={rightActions}\n//                   >\n//                     <List.Item\n//                       prefix={\n//                         <Image\n//                           src={dataItem.photo}\n//                           style={{ borderRadius: 20 }}\n//                           fit=\"cover\"\n//                           width={40}\n//                           height={40}\n//                         />\n//                       }\n//                     >\n//                       {dataItem.name}\n//                     </List.Item>\n//                   </SwipeAction>\n//                 ))}\n//               </List>\n//             )}\n//           </div>\n//         ))\n//       ) : (\n//         <Empty\n//           style={{ padding: \"64px 0\" }}\n//           imageStyle={{ width: 128 }}\n//           description=\"No data\"\n//         />\n//       )}\n//     </div>\n//   );\n// };\n\n// export default NewDish;\n","import {\n    StorageError,\n    TaskState,\n    deleteObject,\n    getDownloadURL,\n    ref,\n    uploadBytesResumable,\n} from 'firebase/storage'\n\nimport { auth, storage } from '.'\n\nexport const uploadStorageBytesResumable = (\n    file: File,\n    onProgress?: ({\n        state,\n        progress,\n    }: {\n        state: TaskState\n        progress: number\n    }) => void,\n    onError?: (error: StorageError) => void,\n    onComplete?: ({\n        downloadURL,\n        storageUrl,\n    }: {\n        downloadURL: string\n        storageUrl: string\n    }) => void\n) => {\n    if (auth.currentUser === null) return\n    // Get the file\n    const extension = file.type.split('/')[1]\n    const storageUrl = `uploads/${\n        auth.currentUser.uid\n    }/${Date.now()}.${extension}`\n    const storageRef = ref(storage, storageUrl)\n\n    const uploadTask = uploadBytesResumable(storageRef, file)\n    // Listen for state changes, errors, and completion of the upload.\n    uploadTask.on(\n        'state_changed',\n        (snapshot) => {\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            const progress =\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n            // console.log('Upload is ' + progress + '% done')\n            typeof onProgress === 'function' &&\n                onProgress({\n                    state: snapshot.state,\n                    progress,\n                })\n            switch (snapshot.state) {\n                case 'paused':\n                    // console.log('Upload is paused')\n                    break\n                case 'running':\n                    // console.log('Upload is running')\n                    break\n            }\n        },\n        (error) => {\n            // A full list of error codes is available at\n            // https://firebase.google.com/docs/storage/web/handle-errors\n            typeof onError === 'function' && onError(error)\n            switch (error.code) {\n                case 'storage/unauthorized':\n                    // User doesn't have permission to access the object\n                    break\n                case 'storage/canceled':\n                    // User canceled the upload\n                    break\n\n                // ...\n\n                case 'storage/unknown':\n                    // Unknown error occurred, inspect error.serverResponse\n                    break\n            }\n        },\n        () => {\n            // Upload completed successfully, now we can get the download URL\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n                // console.log('File available at', downloadURL)\n                typeof onComplete === 'function' &&\n                    onComplete({ downloadURL, storageUrl })\n            })\n        }\n    )\n}\n\nexport const deleteStorageFile = async (url: string) => {\n    try {\n        // Create a reference to the file to delete\n        const fileRef = ref(storage, url)\n\n        // Delete the file\n        const result = await deleteObject(fileRef)\n        return result\n    } catch (error) {\n        // console.log(error);\n    }\n}\n"],"names":["nanoid","size","arguments","length","undefined","crypto","getRandomValues","Uint8Array","reduce","id","byte","toString","toUpperCase","MASTER_MOCK_DATA","LOGIN","email","IS_DEVELOP","password","REGISTER","fullName","username","confirmPassword","NEW_CATEGORY","categoryName","NEW_DISH","dishName","price","dishFiles","initialValues","user","useAuth","navigate","useNavigate","_useParams","useParams","categoryId","dishId","isEditMode","Boolean","_Form$useForm","Form","useForm","form","_slicedToArray","_useState","useState","_useState2","dishDocRefState","setDishDocRefState","onFinish","useCallback","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","uid","dishData","dishColRef","wrap","_context","prev","next","abrupt","Loading","get","show","map","dishFile","url","updateDocument","getColRef","addDocument","Toast","icon","content","t0","message","hide","finish","stop","_x","apply","fetchDishById","_ref2","_callee2","dishDocRef","dishDocData","_context2","getDocRef","getDocument","sent","setFieldsValue","_objectSpread","_x2","useEffect","_jsxs","Fragment","children","_jsx","NavBar","className","onBack","layout","Header","Item","name","label","rules","required","ImageUploader","upload","file","type","Promise","resolve","reject","onProgress","onError","onComplete","auth","currentUser","extension","split","storageUrl","concat","Date","now","storageRef","ref","storage","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","state","error","code","getDownloadURL","then","downloadURL","uploadStorageBytesResumable","_ref4","_callee3","_ref3","_context3","_x3","Error","multiple","maxCount","Input","placeholder","min","Stepper","style","width","step","shouldUpdate","Button","block","color","disabled","isFieldsTouched","getFieldsError","filter","_ref5","errors"],"sourceRoot":""}